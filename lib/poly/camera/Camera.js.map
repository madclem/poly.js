{"version":3,"sources":["../../../src/poly/camera/Camera.js"],"names":["Camera","aspectRatio","create","matrix","viewMatrix","projectionMatrix","mRX","mRY","mRZ","mT","position","target","up","lookAt","angle","fromYRotation","identity","fromXRotation","x","y","z","translate","perspective","fov","near","far","aspect","left","right","bottom","top","dst","Float32Array"],"mappings":"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","file":"Camera.js","sourcesContent":["import { mat4, vec3 } from 'gl-matrix';\n\nclass Camera\n{\n    constructor()\n    {\n        this.aspectRatio = mat4.create();\n\n        this.matrix = mat4.create(); // changes on the camera\n        this.viewMatrix = mat4.create(); // move the world in front of the camera (inverse)\n        this.projectionMatrix = mat4.create();\n\n\n        this.mRX = mat4.create();\n        this.mRY = mat4.create();\n        this.mRZ = mat4.create();\n        this.mT = mat4.create();\n\n        this.position = vec3.create();\n    }\n\n    lookAt(target, up = [0, 1, 0])\n    {\n        mat4.lookAt(this.matrix, this.position, target, up);\n    }\n\n    rotateY(angle)\n    {\n        mat4.fromYRotation(this.mRY, angle);\n\n    }\n    rotateX(angle)\n    {\n        mat4.identity(this.mRX);\n        mat4.fromXRotation(this.mRX, angle);\n\n    }\n\n    rotateZ(angle)\n    {\n        mat4.identity(this.mRZ);\n        mat4.fromXRotation(this.mRZ, angle);\n\n    }\n\n    setRotation(x, y, z)\n    {\n    }\n\n    setPosition(x, y, z)\n    {\n        this.position = [x, y, z]\n        mat4.identity(this.mT, this.mT);\n        mat4.translate(this.mT, this.mT, [x, y, z]);\n    }\n\n    setAspectRatio(aspectRatio)\n    {\n        this.aspectRatio = aspectRatio;\n        this.perspective(this.fov, aspectRatio, this.near, this.far);\n    }\n\n    perspective(fov, aspect, near, far)\n    {\n        mat4.perspective(this.projectionMatrix, fov, aspect, near, far);\n\n        this.fov = fov;\n        this.near = near;\n        this.far = far;\n        this.aspect = aspect;\n    }\n\n    orthographic(left, right, bottom, top, near, far, dst)\n    {\n        dst = dst || new Float32Array(16);\n\n        dst[ 0] = 2 / (right - left);\n        dst[ 1] = 0;\n        dst[ 2] = 0;\n        dst[ 3] = 0;\n        dst[ 4] = 0;\n        dst[ 5] = 2 / (top - bottom);\n        dst[ 6] = 0;\n        dst[ 7] = 0;\n        dst[ 8] = 0;\n        dst[ 9] = 0;\n        dst[10] = 2 / (near - far);\n        dst[11] = 0;\n        dst[12] = (left + right) / (left - right);\n        dst[13] = (bottom + top) / (bottom - top);\n        dst[14] = (near + far) / (near - far);\n        dst[15] = 1;\n\n        return dst;\n    }\n}\n\nexport default Camera;\n"]}