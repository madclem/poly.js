{"version":3,"sources":["../../../src/poly/texture/Texture.js"],"names":["Texture","image","isTexture","gl","POLY","_texture","createTexture","Image","src","addEventListener","onImageLoaded","bind","ext","getExtension","bindTexture","TEXTURE_2D","pixelStorei","UNPACK_FLIP_Y_WEBGL","texImage2D","RGBA","FLOAT","utils","isPowerOfTwo","width","height","generateMipmap","texParameteri","TEXTURE_MAG_FILTER","NEAREST","TEXTURE_MIN_FILTER","index","activeTexture","TEXTURE0"],"mappings":";;;;;;;;;;IAEqBA,O;AAEpB,kBAAYC,KAAZ,EAAmBC,SAAnB,EACA;AAAA;;AACC,OAAKC,EAAL,GAAUC,KAAKD,EAAf;AACA,MAAIA,KAAK,KAAKA,EAAd;;AAEA,MAAGD,SAAH,EACA;AACC,QAAKG,QAAL,GAAgBJ,KAAhB;AACA,GAHD,MAKA;AACC,QAAKI,QAAL,GAAgBF,GAAGG,aAAH,EAAhB;;AAGA,QAAKL,KAAL,GAAa,IAAIM,KAAJ,EAAb;AACA,QAAKN,KAAL,CAAWO,GAAX,GAAiBP,KAAjB;;AAEA,QAAKA,KAAL,CAAWQ,gBAAX,CAA4B,MAA5B,EAAoC,KAAKC,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,EAA8B,KAAKV,KAAnC,CAApC;AACA;AAED;;;;gCAEaA,K,EACd;AACC,OAAIE,KAAK,KAAKA,EAAd;;AAEA,OAAIS,MAAMT,GAAGU,YAAH,CAAgB,mBAAhB,CAAV;AACAV,MAAGW,WAAH,CAAeX,GAAGY,UAAlB,EAA8B,KAAKV,QAAnC;AACAF,MAAGa,WAAH,CAAeb,GAAGc,mBAAlB,EAAuC,IAAvC;AACMd,MAAGe,UAAH,CAAcf,GAAGY,UAAjB,EAA6B,CAA7B,EAAgCZ,GAAGgB,IAAnC,EAAyChB,GAAGgB,IAA5C,EAAkDhB,GAAGiB,KAArD,EAA4DnB,KAA5D;;AAEJ,OAAGG,KAAKiB,KAAL,CAAWC,YAAX,CAAwBrB,MAAMsB,KAA9B,KAAwCnB,KAAKiB,KAAL,CAAWC,YAAX,CAAwBrB,MAAMuB,MAA9B,CAA3C,EACA;AACCrB,OAAGsB,cAAH,CAAkBtB,GAAGY,UAArB;AACA;AACGZ,MAAGuB,aAAH,CAAiBvB,GAAGY,UAApB,EAAgCZ,GAAGwB,kBAAnC,EAAuDxB,GAAGyB,OAA1D;AACAzB,MAAGuB,aAAH,CAAiBvB,GAAGY,UAApB,EAAgCZ,GAAG0B,kBAAnC,EAAuD1B,GAAGyB,OAA1D;AACAzB,MAAGW,WAAH,CAAeX,GAAGY,UAAlB,EAA8B,IAA9B;AACN;;;yBAGD;AAAA,OADKe,KACL,uEADa,CACb;;AACC,OAAI3B,KAAK,KAAKA,EAAd;AACAA,MAAG4B,aAAH,CAAiB5B,GAAG6B,QAAH,GAAcF,KAA/B;AACG3B,MAAGW,WAAH,CAAeX,GAAGY,UAAlB,EAA8B,KAAKV,QAAnC;AACH;;;;;;kBA/CmBL,O","file":"Texture.js","sourcesContent":["\r\n\r\nexport default class Texture\r\n{\r\n\tconstructor(image, isTexture)\r\n\t{\r\n\t\tthis.gl = POLY.gl;\r\n\t\tlet gl = this.gl;\r\n\r\n\t\tif(isTexture)\r\n\t\t{\r\n\t\t\tthis._texture = image;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tthis._texture = gl.createTexture();\r\n\r\n\t\t\t\r\n\t\t\tthis.image = new Image();\r\n\t\t\tthis.image.src = image;\r\n\r\n\t\t\tthis.image.addEventListener('load', this.onImageLoaded.bind(this, this.image))\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tonImageLoaded(image)\r\n\t{\r\n\t\tlet gl = this.gl;\r\n\r\n\t\tvar ext = gl.getExtension('OES_texture_float');\r\n\t\tgl.bindTexture(gl.TEXTURE_2D, this._texture);\r\n\t\tgl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\r\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.FLOAT, image);\r\n\r\n  \t\tif(POLY.utils.isPowerOfTwo(image.width) && POLY.utils.isPowerOfTwo(image.height))\r\n  \t\t{\r\n  \t\t\tgl.generateMipmap(gl.TEXTURE_2D);\r\n  \t\t}\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.NEAREST);\r\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.NEAREST);\r\n        gl.bindTexture(gl.TEXTURE_2D, null);\r\n\t}\r\n\r\n\tbind(index = 0)\r\n\t{\r\n\t\tlet gl = this.gl;\r\n\t\tgl.activeTexture(gl.TEXTURE0 + index);\r\n    \tgl.bindTexture(gl.TEXTURE_2D, this._texture);\r\n\t}\r\n}\r\n"]}