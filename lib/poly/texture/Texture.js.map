{"version":3,"sources":["../../../src/poly/texture/Texture.js"],"names":["Texture","image","isTexture","gl","POLY","_loaded","_texture","createTexture","Image","src","addEventListener","onImageLoaded","bind","bindTexture","TEXTURE_2D","pixelStorei","UNPACK_FLIP_Y_WEBGL","texImage2D","RGBA","UNSIGNED_BYTE","utils","isPowerOfTwo","width","height","generateMipmap","texParameteri","TEXTURE_MAG_FILTER","LINEAR","TEXTURE_MIN_FILTER","TEXTURE_WRAP_S","REPEAT","TEXTURE_WRAP_T","texSubImage2D","index","activeTexture","TEXTURE0"],"mappings":";;;;;;;;;;IAEqBA,O;AAEpB,kBAAYC,KAAZ,EAAmBC,SAAnB,EACA;AAAA;;AACC,OAAKC,EAAL,GAAUC,KAAKD,EAAf;AACA,MAAIA,KAAK,KAAKA,EAAd;;AAEA,OAAKE,OAAL,GAAe,KAAf;AACA,MAAGH,SAAH,EACA;AACC,QAAKI,QAAL,GAAgBL,KAAhB;AACA,QAAKI,OAAL,GAAe,IAAf;AACA,GAJD,MAMA;AACC,QAAKC,QAAL,GAAgBH,GAAGI,aAAH,EAAhB;;AAEA,QAAKN,KAAL,GAAa,IAAIO,KAAJ,EAAb;AACA,QAAKP,KAAL,CAAWQ,GAAX,GAAiBR,KAAjB;;AAEA,QAAKA,KAAL,CAAWS,gBAAX,CAA4B,MAA5B,EAAoC,KAAKC,aAAL,CAAmBC,IAAnB,CAAwB,IAAxB,EAA8B,KAAKX,KAAnC,CAApC;AACA;AAED;;;;gCAEaA,K,EACd;AACC,QAAKI,OAAL,GAAe,IAAf;AACA,OAAIF,KAAK,KAAKA,EAAd;;AAEAA,MAAGU,WAAH,CAAeV,GAAGW,UAAlB,EAA8B,KAAKR,QAAnC;AACAH,MAAGY,WAAH,CAAeZ,GAAGa,mBAAlB,EAAuC,IAAvC;AACMb,MAAGc,UAAH,CAAcd,GAAGW,UAAjB,EAA6B,CAA7B,EAAgCX,GAAGe,IAAnC,EAAyCf,GAAGe,IAA5C,EAAkDf,GAAGgB,aAArD,EAAoElB,KAApE;;AAEJ,OAAGG,KAAKgB,KAAL,CAAWC,YAAX,CAAwBpB,MAAMqB,KAA9B,KAAwClB,KAAKgB,KAAL,CAAWC,YAAX,CAAwBpB,MAAMsB,MAA9B,CAA3C,EACA;AACCpB,OAAGqB,cAAH,CAAkBrB,GAAGW,UAArB;AACA;;AAEGX,MAAGsB,aAAH,CAAiBtB,GAAGW,UAApB,EAAgCX,GAAGuB,kBAAnC,EAAuDvB,GAAGwB,MAA1D;AACAxB,MAAGsB,aAAH,CAAiBtB,GAAGW,UAApB,EAAgCX,GAAGyB,kBAAnC,EAAuDzB,GAAGwB,MAA1D;AACNxB,MAAGsB,aAAH,CAAiBtB,GAAGW,UAApB,EAAgCX,GAAG0B,cAAnC,EAAmD1B,GAAG2B,MAAtD;AACA3B,MAAGsB,aAAH,CAAiBtB,GAAGW,UAApB,EAAgCX,GAAG4B,cAAnC,EAAmD5B,GAAG2B,MAAtD;AACM3B,MAAGU,WAAH,CAAeV,GAAGW,UAAlB,EAA8B,IAA9B;AACN;;;gCAEab,K,EACd;AACC,OAAIE,KAAK,KAAKA,EAAd;AACMA,MAAGU,WAAH,CAAeV,GAAGW,UAAlB,EAA8B,KAAKR,QAAnC;AACAH,MAAG6B,aAAH,CAAiB7B,GAAGW,UAApB,EAAgC,CAAhC,EAAmC,CAAnC,EAAsC,CAAtC,EAAyCX,GAAGe,IAA5C,EAAkDf,GAAGgB,aAArD,EAAoElB,KAApE;AACNE,MAAGU,WAAH,CAAeV,GAAGW,UAAlB,EAA8B,IAA9B;AACA;;;yBAGD;AAAA,OADKmB,KACL,uEADa,CACb;;AACC,OAAI9B,KAAK,KAAKA,EAAd;AACAA,MAAG+B,aAAH,CAAiB/B,GAAGgC,QAAH,GAAcF,KAA/B;AACG9B,MAAGU,WAAH,CAAeV,GAAGW,UAAlB,EAA8B,KAAKR,QAAnC;AACH;;;;;;kBA3DmBN,O","file":"Texture.js","sourcesContent":["\n\nexport default class Texture\n{\n\tconstructor(image, isTexture)\n\t{\n\t\tthis.gl = POLY.gl;\n\t\tlet gl = this.gl;\n\n\t\tthis._loaded = false;\n\t\tif(isTexture)\n\t\t{\n\t\t\tthis._texture = image;\n\t\t\tthis._loaded = true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._texture = gl.createTexture();\n\n\t\t\tthis.image = new Image();\n\t\t\tthis.image.src = image;\n\n\t\t\tthis.image.addEventListener('load', this.onImageLoaded.bind(this, this.image))\n\t\t}\n\n\t}\n\n\tonImageLoaded(image)\n\t{\n\t\tthis._loaded = true;\n\t\tlet gl = this.gl;\n\n\t\tgl.bindTexture(gl.TEXTURE_2D, this._texture);\n\t\tgl.pixelStorei(gl.UNPACK_FLIP_Y_WEBGL, true);\n        gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, image);\n\n  \t\tif(POLY.utils.isPowerOfTwo(image.width) && POLY.utils.isPowerOfTwo(image.height))\n  \t\t{\n  \t\t\tgl.generateMipmap(gl.TEXTURE_2D);\n  \t\t}\n\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n        gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n\t\tgl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n        gl.bindTexture(gl.TEXTURE_2D, null);\n\t}\n\n\tupdateTexture(image)\n\t{\n\t\tlet gl = this.gl;\n        gl.bindTexture(gl.TEXTURE_2D, this._texture);\n        gl.texSubImage2D(gl.TEXTURE_2D, 0, 0, 0, gl.RGBA, gl.UNSIGNED_BYTE, image);\n\t\tgl.bindTexture(gl.TEXTURE_2D, null);\n\t}\n\n\tbind(index = 0)\n\t{\n\t\tlet gl = this.gl;\n\t\tgl.activeTexture(gl.TEXTURE0 + index);\n    \tgl.bindTexture(gl.TEXTURE_2D, this._texture);\n\t}\n}\n"]}