{"version":3,"sources":["../../../src/poly/geometry/Object3D.js"],"names":["Object3D","_matrix","create","_needsUpdate","position","Vector","scale","rotation","_rotation","_scale","fromValues","_position","_createGetterSetterUniforms","identity","translate","rotateX","rotateY","rotateZ","console","log","x","y","z","_updateMatrix","objects","nameProperties","map","_this","o","i","nameProperty","Proxy","get","target","name","undefined","set","value","length"],"mappings":"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","file":"Object3D.js","sourcesContent":["import { mat3, mat4, vec3 } from 'gl-matrix';\r\nimport core from '../core';\r\n\r\nexport default class Object3D\r\n{\r\n    constructor()\r\n    {\r\n        this._matrix = mat4.create();\r\n        this._needsUpdate = false;\r\n\r\n        let position = new core.Vector();\r\n        let scale = new core.Vector();\r\n        let rotation = new core.Vector();\r\n\r\n        this._rotation = vec3.create();\r\n        this._scale = vec3.fromValues(1, 1, 1);\r\n        this._position = vec3.create();\r\n\r\n        this._createGetterSetterUniforms([position, scale, rotation], ['position', 'scale', 'rotation']);\r\n    }\r\n\r\n    _updateMatrix()\r\n    {\r\n        mat4.identity(this._matrix, this._matrix);\r\n\r\n        mat4.translate(this._matrix, this._matrix, this._position);\r\n        mat4.rotateX(this._matrix, this._matrix, this._rotation[0]);\r\n        mat4.rotateY(this._matrix, this._matrix, this._rotation[1]);\r\n        mat4.rotateZ(this._matrix, this._matrix, this._rotation[2]);\r\n        mat4.scale(this._matrix, this._matrix, this._scale);\r\n\r\n        console.log\r\n    }\r\n\r\n    setScale(x, y, z)\r\n    {\r\n        if(!y && !z)\r\n        {\r\n            y = z = x;\r\n        }\r\n        this._scale[0] = x;\r\n        this._scale[1] = y;\r\n        this._scale[2] = z;\r\n\r\n        this._needsUpdate = true;\r\n    }\r\n\r\n    update()\r\n    {\r\n        if(this._needsUpdate)\r\n        {\r\n            this._updateMatrix();\r\n        }\r\n    }\r\n\r\n    _createGetterSetterUniforms(objects, nameProperties)\r\n    {\r\n        let map = { x: 0, y: 1, z: 2 }\r\n        let _this = this;\r\n\r\n        for (var i = 0; i < objects.length; i++)\r\n        {\r\n            let o = objects[i];\r\n            let nameProperty = nameProperties[i];\r\n\r\n            this[nameProperties[i]] = new Proxy(o, {\r\n                get: function(target, name)\r\n                {\r\n                    if (!(name in target))\r\n                    {\r\n                        console.log(\"Getting non-existant property '\" + name + \"'\");\r\n                        return undefined;\r\n                    }\r\n\r\n                    return target[name];\r\n                },\r\n                set: function(target, name, value)\r\n                {\r\n                    if (!(name in target))\r\n                    {\r\n                        console.log(\"Setting non-existant property '\" + name + \"', initial value: \" + value);\r\n                        return false;\r\n                    }\r\n\r\n                    target[name] = value\r\n                    _this['_' + nameProperty][map[name]] = value;\r\n                    _this._needsUpdate = true;\r\n\r\n                    return true;//target[name];\r\n                }\r\n            });\r\n        }\r\n    }\r\n}\r\n"]}