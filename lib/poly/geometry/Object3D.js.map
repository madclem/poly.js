{"version":3,"sources":["../../../src/poly/geometry/Object3D.js"],"names":["Object3D","_matrix","create","_needsUpdate","position","Vector","_onPropertyUpdate","bind","scale","set","rotation","_rotation","_scale","fromValues","_position","x","y","z","identity","translate","rotateX","rotateY","rotateZ","_updateMatrix"],"mappings":";;;;;;;;AAAA;;AACA;;;;;;;;IAEqBA,Q;AAEjB,wBACA;AAAA;;AACI,aAAKC,OAAL,GAAe,eAAKC,MAAL,EAAf;AACA,aAAKC,YAAL,GAAoB,KAApB;;AAEA,aAAKC,QAAL,GAAgB,IAAI,eAAKC,MAAT,CAAgB,KAAKC,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B,CAAhB,CAAhB;AACA,aAAKC,KAAL,GAAa,IAAI,eAAKH,MAAT,CAAgB,KAAKC,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B,CAAhB,CAAb;AACA,aAAKC,KAAL,CAAWC,GAAX,CAAe,CAAf,EAAiB,CAAjB,EAAmB,CAAnB;AACA,aAAKC,QAAL,GAAgB,IAAI,eAAKL,MAAT,CAAgB,KAAKC,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B,CAAhB,CAAhB;;AAEA,aAAKI,SAAL,GAAiB,eAAKT,MAAL,EAAjB;AACA,aAAKU,MAAL,GAAc,eAAKC,UAAL,CAAgB,CAAhB,EAAmB,CAAnB,EAAsB,CAAtB,CAAd;AACA,aAAKC,SAAL,GAAiB,eAAKZ,MAAL,EAAjB;AACH;;;;4CAGD;AACI,iBAAKC,YAAL,GAAoB,IAApB;AACH;;;wCAGD;AACI,2BAAKM,GAAL,CAAS,KAAKG,MAAd,EAAsB,KAAKJ,KAAL,CAAWO,CAAjC,EAAoC,KAAKP,KAAL,CAAWQ,CAA/C,EAAkD,KAAKR,KAAL,CAAWS,CAA7D;AACA,2BAAKR,GAAL,CAAS,KAAKK,SAAd,EAAyB,KAAKV,QAAL,CAAcW,CAAvC,EAA0C,KAAKX,QAAL,CAAcY,CAAxD,EAA2D,KAAKZ,QAAL,CAAca,CAAzE;AACA,2BAAKR,GAAL,CAAS,KAAKE,SAAd,EAAyB,KAAKD,QAAL,CAAcK,CAAvC,EAA0C,KAAKL,QAAL,CAAcM,CAAxD,EAA2D,KAAKN,QAAL,CAAcO,CAAzE;;AAEA,2BAAKC,QAAL,CAAc,KAAKjB,OAAnB,EAA4B,KAAKA,OAAjC;AACA,2BAAKkB,SAAL,CAAe,KAAKlB,OAApB,EAA6B,KAAKA,OAAlC,EAA2C,KAAKa,SAAhD;AACA,2BAAKM,OAAL,CAAa,KAAKnB,OAAlB,EAA2B,KAAKA,OAAhC,EAAyC,KAAKU,SAAL,CAAe,CAAf,CAAzC;AACA,2BAAKU,OAAL,CAAa,KAAKpB,OAAlB,EAA2B,KAAKA,OAAhC,EAAyC,KAAKU,SAAL,CAAe,CAAf,CAAzC;AACA,2BAAKW,OAAL,CAAa,KAAKrB,OAAlB,EAA2B,KAAKA,OAAhC,EAAyC,KAAKU,SAAL,CAAe,CAAf,CAAzC;AACA,2BAAKH,KAAL,CAAW,KAAKP,OAAhB,EAAyB,KAAKA,OAA9B,EAAuC,KAAKW,MAA5C;AAEH;;;iCAGD;AACI,gBAAG,KAAKT,YAAR,EACA;AACI,qBAAKoB,aAAL;AACH;AACJ;;;;;;kBA3CgBvB,Q","file":"Object3D.js","sourcesContent":["import { mat3, mat4, vec3 } from 'gl-matrix';\r\nimport core from '../core';\r\n\r\nexport default class Object3D\r\n{\r\n    constructor()\r\n    {\r\n        this._matrix = mat4.create();\r\n        this._needsUpdate = false;\r\n\r\n        this.position = new core.Vector(this._onPropertyUpdate.bind(this));\r\n        this.scale = new core.Vector(this._onPropertyUpdate.bind(this));\r\n        this.scale.set(1,1,1);\r\n        this.rotation = new core.Vector(this._onPropertyUpdate.bind(this));\r\n\r\n        this._rotation = vec3.create();\r\n        this._scale = vec3.fromValues(1, 1, 1);\r\n        this._position = vec3.create();\r\n    }\r\n\r\n    _onPropertyUpdate()\r\n    {\r\n        this._needsUpdate = true;\r\n    }\r\n\r\n    _updateMatrix()\r\n    {    \r\n        vec3.set(this._scale, this.scale.x, this.scale.y, this.scale.z);\r\n        vec3.set(this._position, this.position.x, this.position.y, this.position.z);\r\n        vec3.set(this._rotation, this.rotation.x, this.rotation.y, this.rotation.z);\r\n\r\n        mat4.identity(this._matrix, this._matrix);\r\n        mat4.translate(this._matrix, this._matrix, this._position);\r\n        mat4.rotateX(this._matrix, this._matrix, this._rotation[0]);\r\n        mat4.rotateY(this._matrix, this._matrix, this._rotation[1]);\r\n        mat4.rotateZ(this._matrix, this._matrix, this._rotation[2]);\r\n        mat4.scale(this._matrix, this._matrix, this._scale);\r\n\r\n    }\r\n\r\n    update()\r\n    {\r\n        if(this._needsUpdate)\r\n        {\r\n            this._updateMatrix();\r\n        }\r\n    }\r\n}\r\n"]}