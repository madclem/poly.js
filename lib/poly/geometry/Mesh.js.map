{"version":3,"sources":["../../../src/poly/geometry/Mesh.js"],"names":["Mesh","program","state","drawType","gl","_attributes","_vertices","_indices","_vertexSize","_numItems","indexBuffer","indices","dynamic","DYNAMIC_DRAW","STATIC_DRAW","createBuffer","bindBuffer","ELEMENT_ARRAY_BUFFER","bufferData","Uint16Array","data","name","length","addAttribute","itemSize","buffer","ARRAY_BUFFER","Float32Array","push","numItems","addAttributeLocation"],"mappings":";;;;;;;;AAAA;;;;;;;;IAEqBA,I;AAEpB,eAAYC,OAAZ,EAAsBC,KAAtB,EACA;AAAA,MAD6BC,QAC7B,uEADwC,CACxC;;AAAA;;AACC,OAAKF,OAAL,GAAeA,OAAf;AACA,OAAKC,KAAL,GAAaA,SAAS,oBAAU,KAAKD,OAAL,CAAaG,EAAvB,CAAtB;AACA,OAAKD,QAAL,GAAgBA,QAAhB;AACA,OAAKE,WAAL,GAAmB,EAAnB;AACA,OAAKC,SAAL,GAAiB,EAAjB;AACA,OAAKC,QAAL,GAAgB,EAAhB;AACA,OAAKC,WAAL,GAAmB,CAAnB;AACA,OAAKC,SAAL,GAAiB,CAAjB;AACA,OAAKC,WAAL,GAAmB,IAAnB;AACA;;;;6BAEUC,O,EAASC,O,EACpB;AACC,OAAIR,KAAK,KAAKH,OAAL,CAAaG,EAAtB;AACA,OAAMD,WAAWS,UAAUR,GAAGS,YAAb,GAA4BT,GAAGU,WAAhD;AACA,QAAKP,QAAL,GAAgBI,OAAhB;;AAEA,QAAKD,WAAL,GAAmBN,GAAGW,YAAH,EAAnB;;AAEAX,MAAGY,UAAH,CAAcZ,GAAGa,oBAAjB,EAAuC,KAAKP,WAA5C;AACAN,MAAGc,UAAH,CAAcd,GAAGa,oBAAjB,EAAuC,IAAIE,WAAJ,CAAgBR,OAAhB,CAAvC,EAAiER,QAAjE;AAEA;;;8BAEWiB,I,EACZ;AAAA,OADkBC,IAClB,uEADyB,WACzB;;AACC,QAAKf,SAAL,GAAiBc,IAAjB;AACA,QAAKZ,WAAL,GAAmB,KAAKF,SAAL,CAAegB,MAAlC;AACA,QAAKb,SAAL,GAAiB,KAAKD,WAAL,GAAiB,CAAlC;AACA,QAAKe,YAAL,CAAkBH,IAAlB,EAAwBC,IAAxB;AACA;;;+BAEYD,I,EAAMC,I,EACnB;AAAA,OADyBG,QACzB,uEADoC,CACpC;;AACC,OAAIpB,KAAK,KAAKH,OAAL,CAAaG,EAAtB;AACA,OAAIqB,SAASrB,GAAGW,YAAH,EAAb;AACGX,MAAGY,UAAH,CAAcZ,GAAGsB,YAAjB,EAA+BD,MAA/B;AACArB,MAAGc,UAAH,CAAcd,GAAGsB,YAAjB,EAA+B,IAAIC,YAAJ,CAAiBP,IAAjB,CAA/B,EAAuDhB,GAAGU,WAA1D;;AAEA,QAAKT,WAAL,CAAiBuB,IAAjB,CAAsB;AACrBP,cADqB;AAErBD,cAFqB;AAGrBI,sBAHqB;AAIrBK,cAAU,KAAKpB,SAJM;AAKrBgB;AALqB,IAAtB;;AAQA,QAAKxB,OAAL,CAAa6B,oBAAb,CAAkCT,IAAlC;AACH;;;;;;kBApDmBrB,I","file":"Mesh.js","sourcesContent":["import State from '../State';\n\nexport default class Mesh\n{\n\tconstructor(program , state, drawType = 4)\n\t{\n\t\tthis.program = program;\n\t\tthis.state = state || new State(this.program.gl);\n\t\tthis.drawType = drawType;\n\t\tthis._attributes = [];\n\t\tthis._vertices = [];\n\t\tthis._indices = [];\n\t\tthis._vertexSize = 0;\n\t\tthis._numItems = 0;\n\t\tthis.indexBuffer = null;\n\t}\n\n\taddIndices(indices, dynamic)\n\t{\n\t\tlet gl = this.program.gl;\n\t\tconst drawType = dynamic ? gl.DYNAMIC_DRAW : gl.STATIC_DRAW;\n\t\tthis._indices = indices;\n\n\t\tthis.indexBuffer = gl.createBuffer();\n\n\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indexBuffer);\n\t\tgl.bufferData(gl.ELEMENT_ARRAY_BUFFER, new Uint16Array(indices), drawType);\n\n\t}\n\n\taddPosition(data, name = 'aPosition')\n\t{\n\t\tthis._vertices = data;\n\t\tthis._vertexSize = this._vertices.length;\n\t\tthis._numItems = this._vertexSize/3;\n\t\tthis.addAttribute(data, name);\n\t}\n\n\taddAttribute(data, name, itemSize = 3)\n\t{\n\t\tlet gl = this.program.gl;\n\t\tlet buffer = gl.createBuffer();\n    \tgl.bindBuffer(gl.ARRAY_BUFFER, buffer);\n    \tgl.bufferData(gl.ARRAY_BUFFER, new Float32Array(data), gl.STATIC_DRAW);\n\n   \t\tthis._attributes.push({\n   \t\t\tname,\n   \t\t\tdata,\n   \t\t\titemSize,\n   \t\t\tnumItems: this._numItems,\n   \t\t\tbuffer\n   \t\t});\n\n   \t\tthis.program.addAttributeLocation(name);\n\t}\n}\n"]}