{"version":3,"sources":["../../../../src/poly/geometry/mesh/Plane.js"],"names":["Plane","program","data","state","drawType","options","w","h","d","axis","positionAttributeName","subdivision","pivotX","pivotY","plane","positions","indices","index","offset","pos","u","v","i","j","getPos","push","uvs","addPosition","addIndices","x","y","z"],"mappings":"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","file":"Plane.js","sourcesContent":["import Mesh from '../Mesh';\r\n\r\nexport default class Plane extends Mesh\r\n{\r\n    constructor(program, data = {}, state, drawType= 4)\r\n    {\r\n        super(program, state, drawType)\r\n\r\n        data = data || {};\r\n\r\n        this.options =\r\n        {\r\n            w: data.w || 1,\r\n            h: data.h || 1,\r\n            d: data.d || 1,\r\n            axis: data.axis || 'xy',\r\n            positionAttributeName: data.positionAttributeName || 'aPosition',\r\n            subdivision: data.subdivision || 10,\r\n        }\r\n\r\n        this.pivotX = -this.options.w/2;\r\n        this.pivotY = -this.options.h/2;\r\n\r\n        this.plane(this.options.w, this.options.h, this.options.subdivision, this.options.axis);\r\n    }\r\n\r\n    plane(w, h, subdivision, axis)\r\n    {\r\n        let positions = [];\r\n        let indices = [];\r\n        let index = 0;\r\n\r\n        let offset = 0;\r\n\r\n\r\n        // for (let i = subdivision - 1; i > -1; i--) {\r\n        //   for (let j = subdivision - 1; j > -1; j--) {\r\n        let pos, u, v;\r\n        for (let i = 0; i < subdivision; i++)\r\n        {\r\n            u = i / subdivision;\r\n            for (let j = 0; j < subdivision; j++)\r\n            {\r\n                v = j / subdivision;\r\n                pos = this.getPos(i,j)\r\n                positions.push(pos[0], pos[1], pos[2]);\r\n                pos = this.getPos(i+1,j)\r\n                positions.push(pos[0], pos[1], pos[2]);\r\n                pos = this.getPos(i+1,j+1)\r\n                positions.push(pos[0], pos[1], pos[2]);\r\n                pos = this.getPos(i,j+1)\r\n                positions.push(pos[0], pos[1], pos[2]);\r\n\r\n                indices.push(index * 4 + 0);\r\n                indices.push(index * 4 + 1);\r\n                indices.push(index * 4 + 2);\r\n                indices.push(index * 4 + 0);\r\n                indices.push(index * 4 + 2);\r\n                indices.push(index * 4 + 3);\r\n\r\n                index++;\r\n\r\n                this.uvs.push(u, v)\r\n            }\r\n        }\r\n\r\n        this.addPosition(positions, this.options.positionAttributeName);\r\n        this.addIndices(indices, false);\r\n    }\r\n\r\n    getPos(i, j)\r\n    {\r\n        let x = this.options.w / this.options.subdivision * i + this.pivotX;\r\n        let y = this.options.h / this.options.subdivision * j + this.pivotY;\r\n        let z = 0 ;\r\n\r\n        if(this.options.axis === \"xy\")\r\n        {\r\n            return [x, y, z];\r\n        }\r\n        else\r\n        {\r\n            return [x, 0, y];\r\n        }\r\n    }\r\n}\r\n"]}