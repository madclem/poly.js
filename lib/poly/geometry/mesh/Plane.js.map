{"version":3,"sources":["../../../../src/poly/geometry/mesh/Plane.js"],"names":["Plane","program","data","state","drawType","options","w","h","d","axis","positionAttributeName","subdivision","pivotX","pivotY","plane","positions","indices","index","offset","pos","u","v","i","j","getPos","push","uvs","addPosition","addIndices","x","y","z"],"mappings":"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","file":"Plane.js","sourcesContent":["import Mesh from '../Mesh';\n\nexport default class Plane extends Mesh\n{\n    constructor(program, data = {}, state, drawType= 4)\n    {\n        super(program, state, drawType)\n\n        data = data || {};\n\n        this.options =\n        {\n            w: data.w || 1,\n            h: data.h || 1,\n            d: data.d || 1,\n            axis: data.axis || 'xy',\n            positionAttributeName: data.positionAttributeName || 'aPosition',\n            subdivision: data.subdivision || 10,\n        }\n\n        this.pivotX = -this.options.w/2;\n        this.pivotY = -this.options.h/2;\n\n        this.plane(this.options.w, this.options.h, this.options.subdivision, this.options.axis);\n    }\n\n    plane(w, h, subdivision, axis)\n    {\n        let positions = [];\n        let indices = [];\n        let index = 0;\n\n        let offset = 0;\n\n\n        // for (let i = subdivision - 1; i > -1; i--) {\n        //   for (let j = subdivision - 1; j > -1; j--) {\n        let pos, u, v;\n        for (let i = 0; i < subdivision; i++)\n        {\n            u = i / subdivision;\n            for (let j = 0; j < subdivision; j++)\n            {\n                v = j / subdivision;\n                pos = this.getPos(i,j)\n                positions.push(pos[0], pos[1], pos[2]);\n                pos = this.getPos(i+1,j)\n                positions.push(pos[0], pos[1], pos[2]);\n                pos = this.getPos(i+1,j+1)\n                positions.push(pos[0], pos[1], pos[2]);\n                pos = this.getPos(i,j+1)\n                positions.push(pos[0], pos[1], pos[2]);\n\n                indices.push(index * 4 + 0);\n                indices.push(index * 4 + 1);\n                indices.push(index * 4 + 2);\n                indices.push(index * 4 + 0);\n                indices.push(index * 4 + 2);\n                indices.push(index * 4 + 3);\n\n                index++;\n\n                this.uvs.push(u, v)\n            }\n        }\n\n        this.addPosition(positions, this.options.positionAttributeName);\n        this.addIndices(indices, false);\n    }\n\n    getPos(i, j)\n    {\n        let x = this.options.w / this.options.subdivision * i + this.pivotX;\n        let y = this.options.h / this.options.subdivision * j + this.pivotY;\n        let z = 0 ;\n\n        if(this.options.axis === \"xy\")\n        {\n            return [x, y, z];\n        }\n        else\n        {\n            return [x, 0, y];\n        }\n    }\n}\n"]}