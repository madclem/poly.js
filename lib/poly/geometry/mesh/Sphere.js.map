{"version":3,"sources":["../../../../src/poly/geometry/mesh/Sphere.js"],"names":["Sphere","program","data","state","drawType","options","nbVert","radius","sphere","positions","indices","index","uv","offset","dTex","angle","i","j","getAngle","push","u","v","addPosition","addAttribute","addIndices","isNormal","ry","Math","PI","rx","r","pos","sin","t","cos"],"mappings":"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","file":"Sphere.js","sourcesContent":["import Mesh from '../Mesh';\r\n\r\nclass Sphere extends Mesh \r\n{\r\n  constructor(program, data={}, state, drawType){\r\n    super(program, state, drawType)\r\n\r\n    this.options = {\r\n      nbVert: data.nbVert || 10,\r\n      radius: data.radius || 1,\r\n    }\r\n\r\n    this.sphere();\r\n  }\r\n\r\n  sphere()\r\n  {\r\n    var positions = [];\r\n    var indices = [];\r\n    var index = 0;\r\n    var uv = []\r\n    var offset = 0;\r\n\r\n    let dTex = 1/ this.options.nbVert;\r\n\r\n    let angle;\r\n    for (var i = 0; i < this.options.nbVert; i++) \r\n    {\r\n      for (var j = 0; j < this.options.nbVert; j++) \r\n      {\r\n        angle = this.getAngle(i, j);\r\n        positions.push(angle[0], angle[1], angle[2]);\r\n\r\n        angle = this.getAngle(i + 1, j);\r\n        positions.push(angle[0], angle[1], angle[2]);\r\n\r\n        angle = this.getAngle(i + 1, j + 1);\r\n        positions.push(angle[0], angle[1], angle[2]);\r\n\r\n        angle = this.getAngle(i, j + 1);\r\n        positions.push(angle[0], angle[1], angle[2]);\r\n\r\n        const u = j / this.options.nbVert;\r\n\t\t\t  const v = i / this.options.nbVert;\r\n  \t\t\tuv.push(1.0 - u, v);\r\n  \t\t\tuv.push(1.0 - u, v + dTex);\r\n  \t\t\tuv.push(1.0 - u - dTex, v + dTex);\r\n  \t\t\tuv.push(1.0 - u - dTex, v);\r\n\r\n        indices.push(index * 4 + 0);\r\n        indices.push(index * 4 + 1);\r\n        indices.push(index * 4 + 2);\r\n        indices.push(index * 4 + 0);\r\n        indices.push(index * 4 + 2);\r\n        indices.push(index * 4 + 3);\r\n        index++;\r\n      }\r\n    }\r\n\r\n    this.addPosition(positions);\r\n    this.addAttribute(uv, 'aUv', 2);\r\n    this.addIndices(indices, false);\r\n  }\r\n\r\n  getAngle(i, j, isNormal = false) \r\n  {\t\r\n    //\trx : -90 ~ 90 , ry : 0 ~ 360\r\n    const ry        = j / this.options.nbVert * Math.PI * 2 - Math.PI;\r\n\t\tconst rx        = i / this.options.nbVert * Math.PI - Math.PI * 0.5;\r\n\t\tconst r         = this.options.radius;\r\n\t\tconst pos       = [];\r\n\t\tpos[1]        \t= Math.sin(rx) * r;\r\n\t\tconst t         = Math.cos(rx) * r;\r\n\t\tpos[0]        \t= Math.cos(ry) * t;\r\n\t\tpos[2]        \t= Math.sin(ry) * t;\r\n\r\n\r\n\t\treturn [pos[0], pos[1], pos[2]];\r\n\t}\r\n\r\n  render(){\r\n  }\r\n}\r\n\r\nexport default Sphere;"]}