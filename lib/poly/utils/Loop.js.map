{"version":3,"sources":["../../../src/poly/utils/Loop.js"],"names":["_loops","_idLoop","_active","func","scope","id","push","window","requestAnimationFrame","_update","bind","start","stop","length","i"],"mappings":";;;;;;;;;;kBACe;AAGd,iBACA;AAAA;;AACC,OAAKA,MAAL,GAAc,EAAd;AACA,OAAKC,OAAL,GAAe,CAAf;;AAEA,OAAKC,OAAL,GAAe,KAAf;AACA;;AATa;AAAA;AAAA,sBAWVC,IAXU,EAWJC,KAXI,EAYd;AACC,OAAIC,KAAK,KAAKJ,OAAd;AACA,QAAKD,MAAL,CAAYM,IAAZ,CAAiB;AAChBH,cADgB;AAEhBE,UAFgB;AAGhBD;AAHgB,IAAjB;;AAMA,OAAG,CAAC,KAAKF,OAAT,EACA;AACCK,WAAOC,qBAAP,CAA6B,KAAKC,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAA7B;AACA,SAAKC,KAAL;AACA;;AAGD,UAAON,EAAP;AACA;AA5Ba;AAAA;AAAA,0BA+Bd;AACC,QAAKL,MAAL,GAAc,EAAd;AACA,QAAKY,IAAL;AACA;AAlCa;AAAA;AAAA,0BAqCd;AACC,QAAKV,OAAL,GAAe,IAAf;AACA;AAvCa;AAAA;AAAA,yBA0Cd;AACC,QAAKA,OAAL,GAAe,KAAf;AACA;AA5Ca;AAAA;AAAA,4BA+Cd;AACC,OAAG,KAAKA,OAAR,EACA;AACCK,WAAOC,qBAAP,CAA6B,KAAKC,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAA7B;;AAEA,QAAG,KAAKV,MAAL,CAAYa,MAAZ,GAAqB,CAAxB,EACA;AACC,UAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKd,MAAL,CAAYa,MAAhC,EAAwCC,GAAxC,EACA;AACC,WAAKd,MAAL,CAAYc,CAAZ,EAAeX,IAAf,CAAoB,KAAKH,MAAL,CAAYc,CAAZ,CAApB;AACA;AACD,KAND,MAQA;AACC,UAAKF,IAAL;AACA;AACD;AAED;AAjEa;;AAAA;AAAA,M","file":"Loop.js","sourcesContent":["\nexport default new class Loop\n{\n\n\tconstructor()\n\t{\n\t\tthis._loops = [];\n\t\tthis._idLoop = 1;\n\n\t\tthis._active = false;\n\t}\n\n\tadd(func, scope)\n\t{\n\t\tlet id = this._idLoop;\n\t\tthis._loops.push({\n\t\t\tfunc,\n\t\t\tid,\n\t\t\tscope\n\t\t});\n\n\t\tif(!this._active)\n\t\t{\n\t\t\twindow.requestAnimationFrame(this._update.bind(this));\n\t\t\tthis.start();\n\t\t}\n\n\n\t\treturn id;\n\t}\n\n\tclear()\n\t{\n\t\tthis._loops = [];\n\t\tthis.stop();\n\t}\n\n\tstart()\n\t{\n\t\tthis._active = true;\n\t}\n\n\tstop()\n\t{\n\t\tthis._active = false;\n\t}\n\n\t_update()\n\t{\n\t\tif(this._active)\n\t\t{\n\t\t\twindow.requestAnimationFrame(this._update.bind(this));\n\n\t\t\tif(this._loops.length > 0)\n\t\t\t{\n\t\t\t\tfor (var i = 0; i < this._loops.length; i++) \n\t\t\t\t{\n\t\t\t\t\tthis._loops[i].func(this._loops[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.stop();\n\t\t\t}\n\t\t}\n\n\t}\n}"]}