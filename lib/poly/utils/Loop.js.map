{"version":3,"sources":["../../../src/poly/utils/Loop.js"],"names":["_loops","_idLoop","_active","func","scope","id","push","window","requestAnimationFrame","_update","bind","start","console","log","i","length","splice","stop"],"mappings":";;;;;;;;;;kBACe;AAGd,iBACA;AAAA;;AACC,OAAKA,MAAL,GAAc,EAAd;AACA,OAAKC,OAAL,GAAe,CAAf;;AAEA,OAAKC,OAAL,GAAe,KAAf;AACA;;AATa;AAAA;AAAA,sBAWVC,IAXU,EAWJC,KAXI,EAYd;AACC,OAAIC,KAAK,KAAKJ,OAAd;AACA,QAAKD,MAAL,CAAYM,IAAZ,CAAiB;AAChBH,cADgB;AAEhBE,UAFgB;AAGhBD;AAHgB,IAAjB;;AAMA,OAAG,CAAC,KAAKF,OAAT,EACA;AACCK,WAAOC,qBAAP,CAA6B,KAAKC,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAA7B;AACA,SAAKC,KAAL;AACA;;AAED,QAAKV,OAAL;;AAEA,UAAOI,EAAP;AACA;AA7Ba;AAAA;AAAA,yBA+BPA,EA/BO,EAgCd;AACCO,WAAQC,GAAR,CAAY,eAAZ;AACA,QAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKd,MAAL,CAAYe,MAAhC,EAAwCD,GAAxC,EAA6C;AAC5C,QAAG,KAAKd,MAAL,CAAYc,CAAZ,EAAeT,EAAf,KAAsBA,EAAzB,EACA;AACCO,aAAQC,GAAR,CAAY,aAAZ;AACA,UAAKb,MAAL,CAAYgB,MAAZ,CAAmBF,CAAnB,EAAsB,CAAtB;AACA;AACA;AACD;AACD;AA1Ca;AAAA;AAAA,0BA6Cd;AACC,QAAKd,MAAL,GAAc,EAAd;AACA,QAAKiB,IAAL;AACA;AAhDa;AAAA;AAAA,0BAmDd;AACC,QAAKf,OAAL,GAAe,IAAf;AACA;AArDa;AAAA;AAAA,yBAwDd;AACC,QAAKA,OAAL,GAAe,KAAf;AACA;AA1Da;AAAA;AAAA,4BA6Dd;AACC,OAAG,KAAKA,OAAR,EACA;AACCK,WAAOC,qBAAP,CAA6B,KAAKC,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAA7B;;AAEA,QAAG,KAAKV,MAAL,CAAYe,MAAZ,GAAqB,CAAxB,EACA;AACC,UAAK,IAAID,IAAI,CAAb,EAAgBA,IAAI,KAAKd,MAAL,CAAYe,MAAhC,EAAwCD,GAAxC,EACA;AACC,WAAKd,MAAL,CAAYc,CAAZ,EAAeX,IAAf,CAAoB,KAAKH,MAAL,CAAYc,CAAZ,CAApB;AACA;AACD,KAND,MAQA;AACC,UAAKG,IAAL;AACA;AACD;AAED;AA/Ea;;AAAA;AAAA,M","file":"Loop.js","sourcesContent":["\nexport default new class Loop\n{\n\n\tconstructor()\n\t{\n\t\tthis._loops = [];\n\t\tthis._idLoop = 1;\n\n\t\tthis._active = false;\n\t}\n\n\tadd(func, scope)\n\t{\n\t\tlet id = this._idLoop;\n\t\tthis._loops.push({\n\t\t\tfunc,\n\t\t\tid,\n\t\t\tscope\n\t\t});\n\n\t\tif(!this._active)\n\t\t{\n\t\t\twindow.requestAnimationFrame(this._update.bind(this));\n\t\t\tthis.start();\n\t\t}\n\n\t\tthis._idLoop++;\n\n\t\treturn id;\n\t}\n\n\tremove(id)\n\t{\n\t\tconsole.log('try to remove');\n\t\tfor (var i = 0; i < this._loops.length; i++) {\n\t\t\tif(this._loops[i].id === id)\n\t\t\t{\n\t\t\t\tconsole.log('remove here');\n\t\t\t\tthis._loops.splice(i, 1);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t}\n\n\tclear()\n\t{\n\t\tthis._loops = [];\n\t\tthis.stop();\n\t}\n\n\tstart()\n\t{\n\t\tthis._active = true;\n\t}\n\n\tstop()\n\t{\n\t\tthis._active = false;\n\t}\n\n\t_update()\n\t{\n\t\tif(this._active)\n\t\t{\n\t\t\twindow.requestAnimationFrame(this._update.bind(this));\n\n\t\t\tif(this._loops.length > 0)\n\t\t\t{\n\t\t\t\tfor (var i = 0; i < this._loops.length; i++)\n\t\t\t\t{\n\t\t\t\t\tthis._loops[i].func(this._loops[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tthis.stop();\n\t\t\t}\n\t\t}\n\n\t}\n}\n"]}