{"version":3,"sources":["../../../src/poly/utils/Loop.js"],"names":["_loops","_idLoop","_active","func","scope","id","push","window","requestAnimationFrame","_update","bind","start","stop","length","i"],"mappings":";;;;;;;;;;kBACe;AAGd,iBACA;AAAA;;AACC,OAAKA,MAAL,GAAc,EAAd;AACA,OAAKC,OAAL,GAAe,CAAf;;AAEA,OAAKC,OAAL,GAAe,KAAf;AACA;;AATa;AAAA;AAAA,sBAWVC,IAXU,EAWJC,KAXI,EAYd;AACC,OAAIC,KAAK,KAAKJ,OAAd;AACA,QAAKD,MAAL,CAAYM,IAAZ,CAAiB;AAChBH,cADgB;AAEhBE,UAFgB;AAGhBD;AAHgB,IAAjB;;AAMA,OAAG,CAAC,KAAKF,OAAT,EACA;AACCK,WAAOC,qBAAP,CAA6B,KAAKC,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAA7B;AACA,SAAKC,KAAL;AACA;;AAGD,UAAON,EAAP;AACA;AA5Ba;AAAA;AAAA,0BA+Bd;AACC,QAAKL,MAAL,GAAc,EAAd;AACA,QAAKY,IAAL;AACA;AAlCa;AAAA;AAAA,0BAqCd;AACC,QAAKV,OAAL,GAAe,IAAf;AACA;AAvCa;AAAA;AAAA,yBA0Cd;AACC,QAAKA,OAAL,GAAe,KAAf;AACA;AA5Ca;AAAA;AAAA,4BA+Cd;AACC,OAAG,KAAKA,OAAR,EACA;AACCK,WAAOC,qBAAP,CAA6B,KAAKC,OAAL,CAAaC,IAAb,CAAkB,IAAlB,CAA7B;;AAEA,QAAG,KAAKV,MAAL,CAAYa,MAAZ,GAAqB,CAAxB,EACA;AACC,UAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,KAAKd,MAAL,CAAYa,MAAhC,EAAwCC,GAAxC,EACA;AACC,WAAKd,MAAL,CAAYc,CAAZ,EAAeX,IAAf,CAAoB,KAAKH,MAAL,CAAYc,CAAZ,CAApB;AACA;AACD,KAND,MAQA;AACC,UAAKF,IAAL;AACA;AACD;AAED;AAjEa;;AAAA;AAAA,M","file":"Loop.js","sourcesContent":["\r\nexport default new class Loop\r\n{\r\n\r\n\tconstructor()\r\n\t{\r\n\t\tthis._loops = [];\r\n\t\tthis._idLoop = 1;\r\n\r\n\t\tthis._active = false;\r\n\t}\r\n\r\n\tadd(func, scope)\r\n\t{\r\n\t\tlet id = this._idLoop;\r\n\t\tthis._loops.push({\r\n\t\t\tfunc,\r\n\t\t\tid,\r\n\t\t\tscope\r\n\t\t});\r\n\r\n\t\tif(!this._active)\r\n\t\t{\r\n\t\t\twindow.requestAnimationFrame(this._update.bind(this));\r\n\t\t\tthis.start();\r\n\t\t}\r\n\r\n\r\n\t\treturn id;\r\n\t}\r\n\r\n\tclear()\r\n\t{\r\n\t\tthis._loops = [];\r\n\t\tthis.stop();\r\n\t}\r\n\r\n\tstart()\r\n\t{\r\n\t\tthis._active = true;\r\n\t}\r\n\r\n\tstop()\r\n\t{\r\n\t\tthis._active = false;\r\n\t}\r\n\r\n\t_update()\r\n\t{\r\n\t\tif(this._active)\r\n\t\t{\r\n\t\t\twindow.requestAnimationFrame(this._update.bind(this));\r\n\r\n\t\t\tif(this._loops.length > 0)\r\n\t\t\t{\r\n\t\t\t\tfor (var i = 0; i < this._loops.length; i++) \r\n\t\t\t\t{\r\n\t\t\t\t\tthis._loops[i].func(this._loops[i]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse\r\n\t\t\t{\r\n\t\t\t\tthis.stop();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t}\r\n}"]}