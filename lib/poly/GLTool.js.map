{"version":3,"sources":["../../src/poly/GLTool.js"],"names":["_lastMesh","aspectRatio","mesh","gl","program","i","_attributes","length","attrib","bindBuffer","ARRAY_BUFFER","buffer","vertexAttribPointer","getAttributeLocation","name","itemSize","FLOAT","indexBuffer","ELEMENT_ARRAY_BUFFER","_bindBuffers","drawElements","TRIANGLES","_indices","UNSIGNED_SHORT","drawArrays","_numItems","w","h","POLY","canvas","width","height"],"mappings":";;;;;;;;;;kBAAe;AAEd,mBACA;AAAA;;AACC,OAAKA,SAAL,GAAiB,IAAjB;AACA,OAAKC,WAAL,GAAmB,CAAnB;AAEA;;AAPa;AAAA;AAAA,+BASDC,IATC,EAUd;AACC,OAAIC,KAAKD,KAAKE,OAAL,CAAaD,EAAtB;;AAEA,QAAI,IAAIE,IAAI,CAAZ,EAAeA,IAAIH,KAAKI,WAAL,CAAiBC,MAApC,EAA4CF,GAA5C,EACA;AACC,QAAIG,SAASN,KAAKI,WAAL,CAAiBD,CAAjB,CAAb;AACAF,OAAGM,UAAH,CAAcN,GAAGO,YAAjB,EAA+BF,OAAOG,MAAtC;AACGR,OAAGS,mBAAH,CAAuBV,KAAKE,OAAL,CAAaS,oBAAb,CAAkCL,OAAOM,IAAzC,CAAvB,EAAuEN,OAAOO,QAA9E,EAAwFZ,GAAGa,KAA3F,EAAkG,KAAlG,EAAyG,CAAzG,EAA4G,CAA5G;AACH;;AAED,OAAGd,KAAKe,WAAR,EACA;AACCd,OAAGM,UAAH,CAAcN,GAAGe,oBAAjB,EAAuChB,KAAKe,WAA5C;AACA;AACD;AAxBa;AAAA;AAAA,uBA2BTf,IA3BS,EA4Bd;AACC,OAAG,KAAKF,SAAL,KAAmBE,IAAtB,EACA;AACC,SAAKiB,YAAL,CAAkBjB,IAAlB;AACA,SAAKF,SAAL,GAAiBE,IAAjB;AACA;;AAED,OAAIC,KAAKD,KAAKE,OAAL,CAAaD,EAAtB;;AAEA,OAAGD,KAAKe,WAAR,EACA;AACCd,OAAGiB,YAAH,CAAgBjB,GAAGkB,SAAnB,EAA8BnB,KAAKoB,QAAL,CAAcf,MAA5C,EAAoDJ,GAAGoB,cAAvD,EAAuE,CAAvE;AACA,IAHD,MAKA;AACCpB,OAAGqB,UAAH,CAAcrB,GAAGkB,SAAjB,EAA4B,CAA5B,EAA+BnB,KAAKuB,SAApC;AACA;AACD;AA7Ca;AAAA;AAAA,yBA+CPC,CA/CO,EA+CJC,CA/CI,EAgDd;AACC,OAAIxB,KAAKyB,KAAKzB,EAAd;AACAA,MAAG0B,MAAH,CAAUC,KAAV,GAAkBJ,CAAlB;AACAvB,MAAG0B,MAAH,CAAUE,MAAV,GAAmBJ,CAAnB;;AAEA,QAAK1B,WAAL,GAAmByB,IAAEC,CAArB;AACA;AAtDa;;AAAA;AAAA,M","file":"GLTool.js","sourcesContent":["export default new class GLTool\n{\n\tconstructor()\n\t{\n\t\tthis._lastMesh = null;\n\t\tthis.aspectRatio = 0;\n\n\t}\n\n\t_bindBuffers(mesh)\n\t{\n\t\tlet gl = mesh.program.gl;\n\n\t\tfor(let i = 0; i < mesh._attributes.length; i++)\n\t\t{\n\t\t\tlet attrib = mesh._attributes[i];\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, attrib.buffer);\n    \t\tgl.vertexAttribPointer(mesh.program.getAttributeLocation(attrib.name), attrib.itemSize, gl.FLOAT, false, 0, 0);\n\t\t}\n\n\t\tif(mesh.indexBuffer)\n\t\t{\n\t\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, mesh.indexBuffer);\n\t\t}\n\t}\n\n\n\tdraw(mesh)\n\t{\n\t\tif(this._lastMesh !== mesh)\n\t\t{\n\t\t\tthis._bindBuffers(mesh);\n\t\t\tthis._lastMesh = mesh;\n\t\t}\n\n\t\tlet gl = mesh.program.gl;\n\n\t\tif(mesh.indexBuffer)\n\t\t{\n\t\t\tgl.drawElements(gl.TRIANGLES, mesh._indices.length, gl.UNSIGNED_SHORT, 0);\n\t\t}\n\t\telse\n\t\t{\n\t\t\tgl.drawArrays(gl.TRIANGLES, 0, mesh._numItems);\n\t\t}\n\t}\n\n\tresize(w, h)\n\t{\n\t\tlet gl = POLY.gl;\n\t\tgl.canvas.width = w;\n\t\tgl.canvas.height = h;\n\n\t\tthis.aspectRatio = w/h;\n\t}\n}"]}