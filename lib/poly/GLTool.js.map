{"version":3,"sources":["../../src/poly/GLTool.js"],"names":["_lastMesh","mesh","gl","program","i","_attributes","length","attrib","bindBuffer","ARRAY_BUFFER","buffer","vertexAttribPointer","getAttributeLocation","name","itemSize","FLOAT","indexBuffer","ELEMENT_ARRAY_BUFFER","_bindBuffers","drawElements","TRIANGLES","_indices","UNSIGNED_SHORT","drawArrays","_numItems"],"mappings":";;;;;;;;;;kBAAe;AAEd,mBACA;AAAA;;AACC,OAAKA,SAAL,GAAiB,IAAjB;AAEA;;AANa;AAAA;AAAA,+BAQDC,IARC,EASd;AACC,OAAIC,KAAKD,KAAKE,OAAL,CAAaD,EAAtB;;AAEA,QAAI,IAAIE,IAAI,CAAZ,EAAeA,IAAIH,KAAKI,WAAL,CAAiBC,MAApC,EAA4CF,GAA5C,EACA;AACC,QAAIG,SAASN,KAAKI,WAAL,CAAiBD,CAAjB,CAAb;AACAF,OAAGM,UAAH,CAAcN,GAAGO,YAAjB,EAA+BF,OAAOG,MAAtC;AACGR,OAAGS,mBAAH,CAAuBV,KAAKE,OAAL,CAAaS,oBAAb,CAAkCL,OAAOM,IAAzC,CAAvB,EAAuEN,OAAOO,QAA9E,EAAwFZ,GAAGa,KAA3F,EAAkG,KAAlG,EAAyG,CAAzG,EAA4G,CAA5G;AACH;;AAED,OAAGd,KAAKe,WAAR,EACA;AACCd,OAAGM,UAAH,CAAcN,GAAGe,oBAAjB,EAAuChB,KAAKe,WAA5C;AACA;AACD;AAvBa;AAAA;AAAA,uBA0BTf,IA1BS,EA2Bd;AACC,OAAG,KAAKD,SAAL,KAAmBC,IAAtB,EACA;AACC,SAAKiB,YAAL,CAAkBjB,IAAlB;AACA,SAAKD,SAAL,GAAiBC,IAAjB;AACA;;AAED,OAAIC,KAAKD,KAAKE,OAAL,CAAaD,EAAtB;;AAEA,OAAGD,KAAKe,WAAR,EACA;AACCd,OAAGiB,YAAH,CAAgBjB,GAAGkB,SAAnB,EAA8BnB,KAAKoB,QAAL,CAAcf,MAA5C,EAAoDJ,GAAGoB,cAAvD,EAAuE,CAAvE;AACA,IAHD,MAKA;AACCpB,OAAGqB,UAAH,CAAcrB,GAAGkB,SAAjB,EAA4B,CAA5B,EAA+BnB,KAAKuB,SAApC;AACA;AAED;AA7Ca;;AAAA;AAAA,M","file":"GLTool.js","sourcesContent":["export default new class GLTool\r\n{\r\n\tconstructor()\r\n\t{\r\n\t\tthis._lastMesh = null;\r\n\r\n\t}\r\n\r\n\t_bindBuffers(mesh)\r\n\t{\r\n\t\tlet gl = mesh.program.gl;\r\n\r\n\t\tfor(let i = 0; i < mesh._attributes.length; i++)\r\n\t\t{\r\n\t\t\tlet attrib = mesh._attributes[i];\r\n\t\t\tgl.bindBuffer(gl.ARRAY_BUFFER, attrib.buffer);\r\n    \t\tgl.vertexAttribPointer(mesh.program.getAttributeLocation(attrib.name), attrib.itemSize, gl.FLOAT, false, 0, 0);\r\n\t\t}\r\n\r\n\t\tif(mesh.indexBuffer)\r\n\t\t{\r\n\t\t\tgl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, mesh.indexBuffer);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tdraw(mesh)\r\n\t{\r\n\t\tif(this._lastMesh !== mesh)\r\n\t\t{\r\n\t\t\tthis._bindBuffers(mesh);\r\n\t\t\tthis._lastMesh = mesh;\r\n\t\t}\r\n\r\n\t\tlet gl = mesh.program.gl;\r\n\r\n\t\tif(mesh.indexBuffer)\r\n\t\t{\r\n\t\t\tgl.drawElements(gl.TRIANGLES, mesh._indices.length, gl.UNSIGNED_SHORT, 0);\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tgl.drawArrays(gl.TRIANGLES, 0, mesh._numItems);\r\n\t\t}\r\n\r\n\t}\r\n}"]}