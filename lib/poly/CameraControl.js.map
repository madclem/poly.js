{"version":3,"sources":["../../src/poly/CameraControl.js"],"names":["CameraControl","rxT","ryT","ry","rx","tr","prevMouse","prevRx","prevRy","_addEvents","value","e","touches","pageX","pageY","clientX","clientY","isDown","currentPos","diffX","diffY","window","addEventListener","onDown","bind","onMove","onUp","removeEventListener"],"mappings":"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","file":"CameraControl.js","sourcesContent":["class CameraControl {\n  constructor(){\n    this.rxT = 0;\n    this.ryT = 0;\n    this.ry = 0;\n    this.rx = 0;\n    this.tr = 0;\n\n    this.prevMouse = [null, null]\n    this.prevRx = null;\n\t\tthis.prevRy = null;\n\n    this._addEvents();\n  }\n\n  setRy(value){\n    this.prevRy = this.ryT = value;\n  }\n\n  onDown(e){\n    if(e.touches) {\n      this.prevMouse = [e.touches[0].pageX, e.touches[0].pageY]\n\t  }\n    else {\n      this.prevMouse = [e.clientX, e.clientY]\n\t  }\n\n    this.isDown = true;\n    this.prevRx = this.rxT = this.rx;\n\t\tthis.prevRy = this.ryT = this.ry;\n  }\n\n  onMove(e){\n\n    if(!this.isDown) return;\n\n    if(e.touches) {\n      this.currentPos = [e.touches[0].pageX, e.touches[0].pageY]\n\t  }\n    else {\n      this.currentPos = [e.clientX, e.clientY];\n\t  }\n\n\n    // this.speed = this.getSpeed();\n    // if(!this.speed[0]) this.speed[0] = 0;\n    // if(!this.speed[1]) this.speed[1] = 0;\n\n    // this.previousTime = Date.now();\n    // this.previousPos[0] = this.currentPos[0];\n    // this.previousPos[1] = this.currentPos[1];\n    let diffX = -(this.currentPos[0] - this.prevMouse[0]);\n\t\tthis.ryT = this.prevRy - diffX * 0.005;\n\n\n\t\tlet diffY = -(this.currentPos[1] - this.prevMouse[1]);\n\t\tthis.rxT = this.prevRx - diffY * 0.005;\n  }\n\n  onUp(e){\n    this.isDown = false;\n  }\n\n  update(){\n\n    // console.log(this.ry);\n    this.ry += (this.ryT - this.ry) * (this.isDown ? .1 : 0.03);\n    this.rx += (this.rxT - this.rx) * (this.isDown ? .1 : 0.03);\n    //\n    // if(!this.isDown) {\n    //   this.speed[0] *= .9;\n    //   this.speed[1] *= .9;\n    // }\n    //\n    // this.ry -= this.speed[0]/ 100;\n    // this.rx -= this.speed[1]/ 100;\n  }\n\n  _addEvents(){\n    window.addEventListener('mousedown',this.onDown.bind(this), false);\n    window.addEventListener('touchstart',this.onDown.bind(this), false);\n    window.addEventListener('mousemove', this.onMove.bind(this), false);\n    window.addEventListener('touchmove', this.onMove.bind(this), false);\n    window.addEventListener('mouseup', this.onUp.bind(this), false)\n    window.addEventListener('touchend', this.onUp.bind(this), false)\n  }\n\n  _removeEvents(){\n    window.removeEventListener('mousedown',this.onDown.bind(this), false);\n    window.removeEventListener('mousemove', this.onMove.bind(this), false);\n    window.removeEventListener('mouseup', this.onUp.bind(this), false)\n    window.removeEventListener('touchstart',this.onDown.bind(this), false);\n    window.removeEventListener('touchmove', this.onMove.bind(this), false);\n    window.removeEventListener('touchend', this.onUp.bind(this), false)\n  }\n}\n\nexport default CameraControl;\n"]}